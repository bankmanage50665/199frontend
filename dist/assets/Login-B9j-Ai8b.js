import{r as s,S as w,j as t,b as d,B as l}from"./index-C-R8sGom.js";const S=()=>{const[r,i]=s.useState("Login"),{token:c,setToken:p,navigate:g,backendUrl:u}=s.useContext(w),[m,x]=s.useState(""),[o,f]=s.useState(""),[n,h]=s.useState(""),b=async a=>{a.preventDefault();try{if(r==="Sign Up"){const e=await d.post(u+"/api/user/register",{name:m,email:n,password:o});e.data.success?(p(e.data.token),localStorage.setItem("token",e.data.token)):l.error(e.data.message)}else{const e=await d.post(u+"/api/user/login",{email:n,password:o});e.data.success?(p(e.data.token),localStorage.setItem("token",e.data.token)):l.error(e.data.message)}}catch(e){console.log(e),l.error(e.message)}};return s.useEffect(()=>{c&&g("/")},[c]),t.jsxs("form",{onSubmit:b,className:"flex flex-col items-center w-[90%] sm:max-w-96 m-auto mt-14 gap-4 text-gray-800",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 mb-2 mt-10",children:[t.jsx("p",{className:"prata-regular text-3xl",children:r}),t.jsx("hr",{className:"border-none h-[1.5px] w-8 bg-gray-800"})]}),r==="Login"?"":t.jsx("input",{onChange:a=>x(a.target.value),value:m,type:"text",className:"w-full px-3 py-2 border border-gray-800",placeholder:"Name",required:!0}),t.jsx("input",{onChange:a=>h(a.target.value),value:n,type:"email",className:"w-full px-3 py-2 border border-gray-800",placeholder:"Email",required:!0}),t.jsx("input",{onChange:a=>f(a.target.value),value:o,type:"password",className:"w-full px-3 py-2 border border-gray-800",placeholder:"Password",required:!0}),t.jsxs("div",{className:"w-full flex justify-between text-sm mt-[-8px]",children:[t.jsx("p",{className:" cursor-pointer",children:"Forgot your password?"}),r==="Login"?t.jsx("p",{onClick:()=>i("Sign Up"),className:" cursor-pointer",children:"Create account"}):t.jsx("p",{onClick:()=>i("Login"),className:" cursor-pointer",children:"Login Here"})]}),t.jsx("button",{className:"bg-black text-white font-light px-8 py-2 mt-4",children:r==="Login"?"Sign In":"Sign Up"})]})};export{S as default};
